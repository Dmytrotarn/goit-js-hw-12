{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict'\nimport axios from 'axios'\n\nconst API_KEY = \"43985824-437e417885fe4ca625fa28e08\"\nconst perPage = 15\naxios.defaults.baseURL = 'https://pixabay.com/api/'\n\nexport async function getSearchResults(search, page) {\n    const response = await axios({\n        params: {\n            key: API_KEY,\n            q: search,\n            image_type: 'photo',\n            safesearch: true,\n            page: page,\n            orientation: 'horizontal',\n            per_page: perPage,\n        }\n    })\n\n    return response.data\n}","'use strict'\nexport function renderImages(images) {\n\n  return images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `<li class=\"item-results\">\n        \t<a href=\"${largeImageURL}\" class=\"gallery-link\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-img\"/>\n        \t</a>\n        \t<div class=\"wrap-info\">\n            <ul class=\"list-info\">\n              <li class=\"item-info\">\n                <p class=\"headline-info\">Likes</p>\n                <p class=\"text-info\">${likes}</p>\n              </li>\n              <li class=\"item-info\">\n                <p class=\"headline-info\">Views</p>\n                <p class=\"text-info\">${views}</p>\n            </li>\n            <li class=\"item-info\">\n                <p class=\"headline-info\">Comments</p>\n                <p class=\"text-info\">${comments}</p>\n            </li>\n            <li class=\"item-info\">\n                <p class=\"headline-info\">Downloads</p>\n                <p class=\"text-info\">${downloads}</p>\n            </li>\n            </ul>\n          </div>\n        </li>`}).join('')\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\"\nimport SimpleLightbox from \"simplelightbox\"\nimport \"simplelightbox/dist/simple-lightbox.min.css\"\nimport { getSearchResults } from './js/pixabay-api'\nimport { renderImages } from './js/render-functions'\n\n\nconst search = document.querySelector('.search-input')\nconst gallery = document.querySelector('.gallery')\nconst load = document.querySelector('.loader')\nconst form = document.querySelector('.form')\nconst loadMore = document.querySelector('.load-more')\n\nlet userInput = ''\nlet page = 1;\nconst perPage = 15;\nlet totalPages\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nform.addEventListener('submit', handleSearch)\n\nasync function handleSearch(e) {\n    e.preventDefault()\n    page = 1\n    userInput = search.value.trim()\n    loadMore.classList.add('hidden')\n\n\n    // Порожній запит\n    if (userInput === '') {\n        iziToast.error({\n            message: 'Input field can not be empty',\n            position: \"topRight\",\n            // timeout: false,\n            displayMode: 2,\n        })\n        form.reset()\n        gallery.innerHTML = ''\n        return\n    }\n\n    load.classList.remove('hidden')\n\n    try {\n        const { hits, total, totalHits } = await getSearchResults(userInput, page)\n\n        if (!total) {                             //нічого не знайдено\n            iziToast.show({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                color: 'blue',\n                position: 'topRight',\n                displayMode: 2\n            })\n            load.classList.add('hidden')\n            gallery.innerHTML = ''\n            form.reset()\n            return\n        }\n        gallery.innerHTML = renderImages(hits)\n        lightbox.refresh()\n        totalPages = Math.ceil(totalHits / perPage)\n        //  більше ніж одна сторінка\n        if (totalPages > 1) {\n            loadMore.classList.remove('hidden')\n        }\n    }\n    catch (error) {\n        iziToast.error({ message: `${error}` })\n    }\n    form.reset()\n    load.classList.add('hidden')\n}\n\nconst scrollOnLoad = () => {\n    const lastItem = document.querySelector('.item-results');\n    const imageHeight = lastItem.getBoundingClientRect().height;\n    const scrollHeight = imageHeight * 2;\n    console.log(scrollHeight);\n\n    window.scrollBy({\n        top: scrollHeight,\n        behavior: 'smooth',\n    });\n};\n\n\n\nconst onLodadMore = async () => {\n    load.classList.remove('hidden')\n    try {\n        page += 1\n\n        const { hits } = await getSearchResults(userInput, page)\n\n        gallery.insertAdjacentHTML('beforeend', renderImages(hits))\n        // плавне прокрручування\n        scrollOnLoad()\n\n        lightbox.refresh()\n        // кінець колекції\n        if (page >= totalPages) {\n            loadMore.classList.add('hidden')\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color: 'blue',\n                position: 'topRight',\n            })\n        }\n        load.classList.add('hidden')\n    } catch (error) {\n        iziToast.error({ message: `${error}` })\n    }\n}\n\nloadMore.addEventListener('click', onLodadMore)"],"names":["API_KEY","perPage","axios","getSearchResults","search","page","renderImages","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","load","form","loadMore","userInput","totalPages","lightbox","SimpleLightbox","handleSearch","e","iziToast","hits","total","totalHits","error","scrollOnLoad","scrollHeight","onLodadMore"],"mappings":"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"}